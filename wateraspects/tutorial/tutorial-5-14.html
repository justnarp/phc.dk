<html>
              <!-- This panel generated from the developerWorks XML tag set for tutorials, Version 3.0.2.  (C) Copyright 2000, 2002 IBM Corporation.  All rights reserved. -->
            
<!-- Mirrored from www.phc.dk/wateraspects/tutorial/tutorial-5-14.html by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 27 Aug 2010 12:21:10 GMT -->
<head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>My First Glass of WaterAspects
</title></head><body vlink="000099" alink="33cc00" text="000000" bgcolor="ffffff"><script language="javascript">
<!-- 
var emailAbstract="PH-Consult is proud to present the WaterAspects modelling framework.";
var justTitle="WaterAspects Tutorial";
var tutorialPrereqs="";
var menu1blurb="Introduction"; 
var menu2blurb="Release Notes and Version History"; 
var menu3blurb="Getting Started"; 
var menu4blurb="Modelling with WaterAspects
"; 
var menu5blurb="My First Glass of WaterAspects
"; 
var menu6blurb="Reading My Own Data in WaterAspects
"; 

      var browser = "x";
      if (navigator.userAgent.indexOf("Mozilla/4") != -1) browser = "N3";
      else if (navigator.userAgent.indexOf("Mozilla/3") != -1) browser = "N3";
      else browser = "x";
      
      if (browser=="N3")
      {
    var menu1over=new Image(108,68); 
var menu1out=new Image(108,68); 
var menu2over=new Image(108,68); 
var menu2out=new Image(108,68); 
var menu3over=new Image(108,68); 
var menu3out=new Image(108,68); 
var menu4over=new Image(108,68); 
var menu4out=new Image(108,68); 
var menu5over=new Image(108,68); 
var menu5out=new Image(108,68); 
var menu6over=new Image(108,68); 
var menu6out=new Image(108,68); 

        var topmainover=new Image(77,15);
        var topmainout=new Image(77,15);
        var bottommainover=new Image(77,15);
        var bottommainout=new Image(77,15);
        var topsectionover=new Image(98,15);
        var topsectionout=new Image(98,15);
        var bottomsectionover=new Image(98,15);
        var bottomsectionout=new Image(98,15);
        var topfeedbackover=new Image(80,15);
        var topfeedbackout=new Image(80,15);
        var bottomfeedbackover=new Image(80,15);
        var bottomfeedbackout=new Image(80,15);
        var toppreviousover=new Image(77,15);
        var toppreviousout=new Image(77,15);
        var bottompreviousover=new Image(77,15);
        var bottompreviousout=new Image(77,15);
        var topnextover=new Image(60,15);
        var topnextout=new Image(60,15);
        var bottomnextover=new Image(60,15);
        var bottomnextout=new Image(60,15);
        var topnextsectionover=new Image(108,15);
        var topnextsectionout=new Image(108,15);
        var bottomnextsectionover=new Image(108,15);
        var bottomnextsectionout=new Image(108,15);
      
    menu1over.src="imagemaster/himenu1.jpg"; 
menu1out.src="imagemaster/menu1.jpg"; 
menu2over.src="imagemaster/himenu2.jpg"; 
menu2out.src="imagemaster/menu2.jpg"; 
menu3over.src="imagemaster/himenu3.jpg"; 
menu3out.src="imagemaster/menu3.jpg"; 
menu4over.src="imagemaster/himenu4.jpg"; 
menu4out.src="imagemaster/menu4.jpg"; 
menu5over.src="imagemaster/himenu5.jpg"; 
menu5out.src="imagemaster/menu5.jpg"; 
menu6over.src="imagemaster/himenu6.jpg"; 
menu6out.src="imagemaster/menu6.jpg"; 

        var mainblurb="Main menu";
        var sectionblurb="Section menu";
        var feedbackblurb="Give feedback on this tutorial";
        var previousblurb="Go to previous panel";
        var nextblurb="Go to next panel";
        var nextsectionblurb="Go to next section";

      topmainover.src="../default/i/h-main.gif";
      topmainout.src="../default/i/main.gif";
      bottommainover.src="../default/i/h-main.gif";
      bottommainout.src="../default/i/main.gif";
      topsectionover.src="../default/i/h-section.gif";
      topsectionout.src="../default/i/section.gif";      
      bottomsectionover.src="../default/i/h-section.gif";
      bottomsectionout.src="../default/i/section.gif";      
      topfeedbackover.src="../default/i/h-feedback.gif";
      topfeedbackout.src="../default/i/feedback.gif";
      bottomfeedbackover.src="../default/i/h-feedback.gif";
      bottomfeedbackout.src="../default/i/feedback.gif";
      toppreviousover.src="../default/i/h-previous.gif";
      toppreviousout.src="../default/i/previous.gif";
      bottompreviousover.src="../default/i/h-previous.gif";
      bottompreviousout.src="../default/i/previous.gif";
      topnextover.src="../default/i/h-next.gif";
      topnextout.src="../default/i/next.gif";
      bottomnextover.src="../default/i/h-next.gif";
      bottomnextout.src="../default/i/next.gif";
      topnextsectionout.src="../default/i/nextsection.gif";
      topnextsectionover.src="../default/i/h-nextsection.gif";
      bottomnextsectionout.src="../default/i/nextsection.gif";
      bottomnextsectionover.src="../default/i/h-nextsection.gif";
      }
      function iOut(image)
      {
        if (browser=="N3")document[image].src=eval(image + "out.src");
      }
      function iOver(image)
      {
        if (browser=="N3")document[image].src=eval(image + "over.src");
      }
      // -->
    </script><script src="../default/i/emailfriend.js" language="javascript"></script><a href="#navskip"><img border="0" alt="Skip to main content" src="../default/i/c.gif"></a><table width="100%" cellspacing="0" cellpadding="5" border="0">
		<tr>
			<td bgcolor="#33cc00" width="100%" height="8px"></td>
		</tr>
		<tr>
			<td align="right"><img src="images/phc_logo.gif" alt="PH-Consult"></td>
		</tr>
		<tr>
			<td bgcolor="#000099" width="100%" height="8px"></td>
		</tr>
	</table><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td><img src="imagemaster/masthead.jpg" alt="WaterAspects Tutorial"></td><td width="*" valign="bottom" align="right"><a border="0" href="tutorial-ltr.pdf"><img alt="PDF (letter)" border="0" src="../default/i/icon-pdf-ltr.gif"></a><a border="0" href="tutorial-a4.pdf"><img alt="PDF (A4)" border="0" src="../default/i/icon-pdf-a4.gif"></a></td></tr><tr><td height="2" colspan="2"><img height="2" width="1" src="../default/i/c.gif"></td></tr></table><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td width="150" height="1" bgcolor="#000000" colspan="6"><img alt="" height="1" width="150" src="../default/i/c.gif"></td></tr><tr><td background="../default/i/sw-gold.gif"><a border="0" href="index.html" onMouseOver="iOver('topmain'); iOver('bottommain'); self.status=mainblurb; return true;" onMouseOut="iOut('topmain'); iOut('bottommain'); self.status=''; return true;"><img alt="Main menu" border="0" src="../default/i/main.gif" name="topmain"></a></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topsection'); iOver('bottomsection'); self.status=sectionblurb; return true;" onMouseOut="iOut('topsection'); iOut('bottomsection'); self.status=''; return true;" href="index5.html"><img alt="Section menu" border="0" src="../default/i/section.gif" name="topsection"></a></td><td width="100%" background="../default/i/sw-gold.gif"><img src="../default/i/c.gif"></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topprevious'); iOver('bottomprevious'); self.status=previousblurb; return true;" onMouseOut="iOut('topprevious'); iOut('bottomprevious'); self.status=''; return true;" href="tutorial-5-13.html"><img alt="Previous" border="0" src="../default/i/previous.gif" name="topprevious"></a></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topnext'); iOver('bottomnext'); self.status=nextblurb; return true;" onMouseOut="iOut('topnext'); iOut('bottomnext'); self.status=''; return true;" href="tutorial-5-15.html"><img alt="Next" border="0" src="../default/i/next.gif" name="topnext"></a></td></tr></table><table bgcolor="ffffff" cellspacing="0" cellpadding="2" border="0" height="400" width="100%"><tr valign="bottom"><td height="25" colspan="4"><img border="0" height="25" width="562" src="imagemaster/titlebar5.jpg" alt="5. My First Glass of WaterAspects
"></td></tr><tr><td bgcolor="ffffff" width="15">&nbsp;</td><td bgcolor="ffffff" width="12">&nbsp;</td><td valign="top" align="left" bgcolor="ffffff" width="*"><p><br><table cellspacing="0" cellpadding="0" border="0"><tr><td width="90%"><font size="4" face="Arial, sans-serif"><b>Volume dependent outlet flow</b></font></td><td width="200" align="right"><font size="1" face="Arial, sans-serif"><nobr>    page 14 of 16</nobr></font></td></tr></table><br><br></p><font size="2" face="Arial, sans-serif"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">Up until now the flow through the straw has been treated as constant but in our case this flow actually depends on how much water there is in the glass. You may recall this from the case description earlier on. Basically when there is little water in the glass the flow is small and as the volume increases so does the flow up to a given point. Let's take a look at how we in Water<b>Aspects</b> can define such a dependency between variables.</p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">In this version of Water<b>Aspects</b> a variable can have many different formulations:
                    <ul><li>
<b>constant</b>: you define a constant value.</li><li>
<b>interval tabular dependency</b>: where you define the values that your dependent variable should take for given intervals of the independent variable.</li><li>
<b>interpolated tabular dependency</b>: where you define the values that your dependent variable should take for given values of the independent variable and Water<b>Aspects</b> interpolates between these points</li><li>
<b>variable collection</b>: where the dependent variable is defined as a standard summary function of any number of other variables. The standard functions currently available include: sum, average, maximum (i.e. equal to the variable with the highest value at that time step), minimum and "value if identical" which results in the value if all values are identical and NaN (not a number) otherwise.</li><li>
<b>expression dependency</b>: where the dependent variable is defined as an arbitrary expression of any number of other variables (even its own earlier values).</li><li>
<b>observations</b> and <b>observations (stochastic)</b>: where the values depend on time stamped data from observation data. The former is used for deterministic simulations while the latter is used for stochastic ones.</li></ul>
</p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">
                    </p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">A variable can actually hold several different <i>formulations</i> where only one is active for the simulation. This allows you to quickly switch between formulations and thereby evaluate and compare different definitions (for example different control function). Most variables are by default defined as constants with a constant value formulation. On some variables the variable formulation is <i>locked</i>. This means that the variable's formulation cannot be changed by the user and a small key is shown on the variable icon. A variable is usually locked because its value is calculated by the component it is on. In our glass case, this goes for, for example, "Overflow" whose value calculation is predefined. For some other locked variables, like "Water Volume", you as user can set the initial value but you cannot change the variable's formulation.</p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">In our glass case we'll use an interpolated tabular dependency to describe the variation of flow through the straw as a function of the volume of water in the glass. Select and right-click the "Outlet Capacity" variable on the "Glass with straw". Then choose the 'Variable editor' menu item to start up the variable editor which looks like this:</p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/OutletCapacityVariableEditor.PNG"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">In the top of the menu is a list of the formulations on this variable. So far our list only contains one formulation. To add a new formulation press the 'Add' button which will bring forward a small chooser like this:</p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/VariableEditorWithAddDropDown.PNG"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">Pick 'Tabular Dependency' in the drop down menu and click the 'OK' button. </p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/VariableEditorWithAddDropDownDropped.png"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">Your variable editor will now have a new variable formulation in the top table. You need to set the new tabular dependency as <i>Active</i>. Do this by clicking the checkbox in the right column of the table. You should now have something like this:</p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/VariableEditorWithTabularDependencyJustAdded.PNG"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">To define the interpolated tabular dependency we now need to:
                    <ul><li>select the independent variable "Water Volume"</li><li>set the 'Lag' to 1 (this means that we wish our "Outlet Capacity" to depend on how much water was in the glass in the previous time step)</li><li>set 'Dependency Type' to 'Interpolated'</li><li>define pairs of independent-dependent by clicking the <b>
<i>lower</i>
</b> 'Add' button four times and and entering the four data points as shown below.</li></ul>
</p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">You can select the independent variable, "Water Volume", by clicking the '...' button and choosing the variable in the tree much in the same way as we selected the downstream water component earlier in this example. </p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/SelectingWaterVolumeAsIndependent.PNG"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">When the above is done our variable editor looks like below. To see the full plot of the entered relationship you need to scroll down using the scroll bar on your right.</p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/VariableEditorWithCompletedTabularDependency.png"><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">Press the 'OK' button to apply your changes and to close the variable editor window. </p><p xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">If you now select "Flow" on the "Glass opening" and "Overflow" and "Outlet Flow" on the "Glass" (again using 'Ctrl' to select more than one variable) you should not that the entered relationship has been considered and that your plot looks something like:</p><img xmlns:xi="http://www.w3.org/2003/XInclude" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance" src="tutorialresources/org/wateraspects/examples/MyFirstGlassOfWaterAspectsTest/OverflowOutletFlowAndFlowWithTabularDependentOutletCapacity.PNG"><br></font></td></tr></table><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td background="../default/i/sw-gold.gif"><a border="0" href="index.html" onMouseOver="iOver('topmain'); iOver('bottommain'); self.status=mainblurb; return true;" onMouseOut="iOut('topmain'); iOut('bottommain'); self.status=''; return true;"><img alt="Main menu" border="0" src="../default/i/main.gif" name="bottommain"></a></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topsection'); iOver('bottomsection'); self.status=sectionblurb; return true;" onMouseOut="iOut('topsection'); iOut('bottomsection'); self.status=''; return true;" href="index5.html"><img alt="Section menu" border="0" src="../default/i/section.gif" name="bottomsection"></a></td><td width="100%" background="../default/i/sw-gold.gif"><img src="../default/i/c.gif"></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topprevious'); iOver('bottomprevious'); self.status=previousblurb; return true;" onMouseOut="iOut('topprevious'); iOut('bottomprevious'); self.status=''; return true;" href="tutorial-5-13.html"><img alt="Previous" border="0" src="../default/i/previous.gif" name="bottomprevious"></a></td><td background="../default/i/sw-gold.gif"><a border="0" onMouseOver="iOver('topnext'); iOver('bottomnext'); self.status=nextblurb; return true;" onMouseOut="iOut('topnext'); iOut('bottomnext'); self.status=''; return true;" href="tutorial-5-15.html"><img alt="Next" border="0" src="../default/i/next.gif" name="bottomnext"></a></td></tr><tr><td width="150" height="1" bgcolor="#000000" colspan="6"><img alt="" height="1" width="150" src="../default/i/c.gif"></td></tr></table><table width="100%" cellspacing="0" cellpadding="0" border="0">
		<tr>
			<td bgcolor="#000099" width="100%" height="8px"></td>
		</tr>
	</table></body>
<!-- Mirrored from www.phc.dk/wateraspects/tutorial/tutorial-5-14.html by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 27 Aug 2010 12:21:20 GMT -->
</html>